# 操作系统的访问控制设计实例

## 实验目的

- 以 iOS 和 Android 系统为研究对象，对操作系统的访问控制进行研究。

## 实验环境

- 操作系统：MIUI(Android)
- 硬件版本：XiaoMi 10 pro

## 实验结果

- 以 iOS 和 Android 系统为研究对象

  - 当系统处于锁屏状态下接收到新短信时，不解锁情况下

    - 系统是否允许查看短信内容？**不允许**
    - 系统是否允许回复短信？**不允许**
    - 安卓上的 App : 以 **微信电话本**为例，在接管了系统短信功能和权限之后，是否会有一些不同的功能设定？
    
       会显示需要修改手机默认设置，若使用系统自带，则仍然只可读而不可回复

  - 当系统处于锁屏状态下，使用系统内置（例如 iOS 的 Siri ）或第三方的语音助手可以完成以下哪些操作？


    - 访问通讯录

      **不允许**

    - 拨打电话

      **允许**

    - 访问相册

      **不允许**

    - 查看短信收件箱

      **不允许**

  -  如果你的手机支持指纹识别解锁手机，请实验并分析指纹识别相比较于简单密码、复杂密码、图形解锁、人脸识别解锁、声纹解锁等解锁方式的安全性、便利性差异。 

    |   密码类型   |                安全性                |                  便利性                  |
    | :----------: | :----------------------------------: | :--------------------------------------: |
    |   简单密码   |         安全性低         |          方便          |
    |   复杂密码   |              安全性较低              |         容易混淆忘记，较不方便         |
    |   图形解锁   |       安全性较低      |             需要画图，较不方便             |
    | 人脸识别解锁 |               安全性高               | 机器主动识别，方便 |
    |   声纹解锁   | 易被伪造，在某些特定的环境下安全性高 |      解决双手没有空暇的问题方便解锁      |
    |   指纹解锁   |              安全性较高              |  方便，但有时候手腾不出来  |

思考题

- 以上设计实现方式属于我们课堂上讲过的哪种强制访问控制模型？Lattice/BLP？Biba？
  - Biba模型-上读下写，锁屏时只能读短信，属于上读；解开屏幕以后，可以回复短信，属于下写。
- 系统或第三方应用程序是否提供了上述功能的访问控制规则修改？如果修改默认配置，是提高了安全性还是降低了安全性？
  - 是，降低了，授予的权力越多安全性就越低。

## 课后题

1. #### 生物特征身份认证方式有哪些？优缺点分析？应用场景举例。

   - **指纹识别**

     - 优点
       1）实用性强，指纹样本便于获取，易以开发识别系统；

       2）可靠性易以增加，可以通过登记更多的指纹，鉴别更多的手指来提高其准确度；

       3）方便性好，扫描指纹的速度很快，使用非常方便；

       4）应用广泛，指纹识别技术占领了大部分市场；

       5）指纹采集头可以更加小型化，并且价格会更加低廉。

     - 缺点

       1）指纹的广泛性较差，某些人或某些群体的指纹因为指纹特征很少，故而很难成像，造成一定影响；

       2）用户接受性较差，过去因为在犯罪记录中使用指纹，使得某些人害怕“将指纹记录在案”；

       3）每一次使用指纹时都会在指纹采集头上留下用户的指纹印痕，而这些指纹痕迹存在被用来复制指纹的可能性。

     可见，指纹识别技术是目前最方便、可靠、非侵害和价格便宜的生物识别技术解决方案，市场应用有着很大的潜力。

     - 应用场景

     1. 用于入境检查、验证身份
     2. 应用于科技领域的指纹解锁
     3. 医学用途，通过检查人的指纹、掌纹，能够查出某些疾病。

   - **声纹识别**

     - 优点
       1）有较好的方便性，蕴含声纹特征的语音获取方便、自然；

       2）有较好的经济性，获取语音的识别成本低廉，使用简单，一个麦克风即可，在使用通讯设备时更无需额外的录音设备；

       3）适合远程身份确认，只需要一个麦克风或电话、手机就可以通过网路（通讯网络或互联网络）实现远程登录；

       4）声纹辨认和确认的算法复杂度低；

       5）有较好的准确性，配合一些其他措施，如通过语音识别进行内容鉴别等，可以提高准确率；
	   
	   6）声音识别是一种非接触的识别技术，用户可以很自然地接受。
	     - 缺点
	   1）精确度较低，声音因为变化的范围太大，很难进行精确的匹配；
	   2）技术复杂度较高，声音的音量、速度和音质会受一定的条件，如感冒的影响，需增加系统功能以适应该变化；
	   3）成本较高，声音采集设备，如高保真的麦克风，是很昂贵的。
声纹识别的应用越来越收到系统开发者和用户青睐，声纹识别的世界市场占有率15.8%，仅次于指纹和掌纹的生物特征识别，并有不断上升的趋势。
   - **视网膜识别**

     - 优点

       1）视网膜是一种极其固定的生物特征，因为它是“隐藏“的，故而不可能磨损，老化或是为疾病影响；

       2）使用者不需要和设备进行直接的接触；

       3）是一个最难欺骗的系统因为视网膜是不可见的，故而不会被伪造；
	   
	   4）视网膜识别技术有较高的准确性和防伪性。

     - 缺点

       1）应用技术的广泛性差，应用普及程度不高，视网膜技术未经过任何测试；

       2）视网膜技术可能会给使用者带来健康的损坏，这需要进一步的研究，影响应用前景；

       3）对于消费者，视网膜技术没有吸引力；

       4）成本较高 。

   - **虹膜识别**

     - 优点

       1）便于用户使用；

       2）生物特征的采集较为方便，准确性较高；

       3）不需物理的接触。

     - 缺点

       1）应用普及程序较低，虹膜识别系统已经进行了许多测试，但还没有更大规模的应用；

       2）成本较高，很难将图像获取设备的尺寸小型化，同时需要昂贵的摄像头。

     - 应用场景

       1. 门禁考勤：扫描虹膜就能实现通道控制、开/锁门的和考勤管理，虹膜考勤识别迅速，无需接触，不能被假冒和替代打卡。
       2. 网络安全：借助虹膜技术提供互联网保护，确保用户登陆、计算机、在线交易及信息安全，如微软的Windows10用虹膜识别代替密码登录。
       3. 银行高端系统-金库安保

   - **人脸识别**

     - 优点

       1）使用方便，用户接受度高人脸识别技术使用通用的摄像机作为识别信息获取装置，以非接触的方式在识别对象未察觉的情况下完成识别过程。

       2）用户友好，直观性突出人脸识别技术所使用的依据是人的面部图像，而人脸无疑是肉眼能够判别的最直观的信息源，方便人工确认、审计，“以貌取人”符合人的认知规律。

       3）识别精确度高，速度快与其它生物识别技术相比，人脸识别技术的识别精度处于较高的水平，误识率、拒认率较低。

     - 缺点
     1）精确性低，目前的人脸识别方法主要集中在二维图像方面，由于受到光照、姿势、表情变化的影响，识别的准确度受到很大的限制；
	 2）成本较高，面像识别技术的改进依赖于提取特征与比对技术的提高，采集图像的设备较为昂贵。
       
     - 应用场景

       1. 企业考勤管理，刷脸打卡
       2. 小区门禁和家庭防盗方面，通过刷脸进小区
       3. 银行自助服务系统
       4. 支付软件
       5. 通过人脸识别技术进行全国追捕。
       
   - **掌纹识别**
      - 优点
      1）手掌的几何特征的稳定性极高，不易受外在环境的影响而改变
	  - 缺点
	  1）容易受生理状况改变的影响，而造成识别率的不稳定
	  
   - **静脉识别**

     - 优点

       1)通过例证和收集数据证明，所有人的静脉是不同的，完全相同静脉特征的人几乎没有，而且这种差异将会在他们的一生中都不会消失； 
       2)由于静脉分布藏匿于身体内部，其特征属天赋密码，不会遗失，不会遗忘，使用简便，所以不存在仿制或失窃的风险；
       3)高精密判断，不受外部污染、轻伤影响，人类手部表面的皮肤条件不会对认证工作造成影响；
       4) 非侵人性和非接触性成像技术对红外线的采用，可以确保使用者的便捷性和清洁性；
       5)由于静脉形状的相对稳定性和捕捉影像清晰性，所以，可对低分辨率相机拍摄的图样资料进行小型的简单数据影像技术处理。因此，其准确率比指纹识别还高。实验显示，其无法识别的几率仅有0.01 %，识别错误的概率则只有0.00008 %，识别率已经达到了99.9% 

     - 缺点

       1）手背静脉仍可能随着年龄和生理的变化而发生变化，永久性尚未得到证实

       2）虽然可能性较小，但仍然存在无法成功注册登记的可能。

       3）由于采集方式受自身特点的限制，产品难以小型化。

       4）采集设备有特殊要求，设计相对复杂，制造成本高。

     - 应用场景

       1. 实时采取静脉图，提取特征值进行匹配，从而对个人进行身份鉴定。

2. #### “找回口令功能”和“忘记密码”在访问授权机制中的意义？请尝试设计几种安全的“找回口令功能”，详细描述找回口令的用户具体操作过程。

   
- “找回口令功能”和“忘记密码”可以有效帮助用户避免不必要的损失，防止用户在丢失身份认证口令后无法进行身份认证增加系统的可用性。
- 设计“找回口令功能”
  - 利用用户注册账户时绑定的手机号找回密码
用户端发起找回密码申请，填写丢失口令的帐号（二次确认）与动态验证码（防止机器操作）
确认无误后，向用户申请账户时填写的手机号发送6-8位动态验证码
用户在找回密码页面填写服务端发送的动态验证码后，即可修改账户密码
   
- 具体操作过程：
  - 流程1：登录困难->忘记密码，找回->输入手机号->获取验证码->输入新密码。
  - 流程2：登录困难->手机号不能用->人工申诉->验证账号所有权->人工修改登录账号与密码。

3. #### 绘制用户使用用户名/口令+图片验证码方式录系统的流程图。考虑认证成功和失败两种场景，考虑授权成功和失败两种场景。
![](login.png)

4. #### Windows XP / 7 中的访问控制策略有哪些？访问控制机制有哪些？

   - DAC（Discretionary Access Control，自主访问控制）DAC 就是让客体的所有者来定义访问控制规则。在 DAC 中，访问控制的规则维护完全下发到了所有者手上，管理员在理论上不需要对访问控制规则进行维护。因此，**DAC 具备很高的灵活性，维护成本也很低**。相对地，尽管 DAC 降低了管理员的工作难度，但是会增加整体访问控制监管的难度，以至于安全性完全取决于所有者的个人安全意识。这么说来，DAC 的特性其实就是将安全交到了用户手中，因此，DAC 适合在面向用户的时候进行使用。当用户需要掌控自己的资源时，我们通常会采取 DAC，来完成访问控制。比方说，Linux 中采用的就是 DAC，用户可以控制自己的文件能够被谁访问。
   - role-BAC（role Based Access Control，基于角色的访问控制）**role-BAC 就是将主体划分为不同的角色，然后对每个角色的权限进行定义**。**role-BAC 是防止权限泛滥，实现最小特权原则的经典解决方案**。试想一下，假如没有角色的概念，那么管理员需要给每一个用户都制定不同的权限方案。当用户的岗位或职责发生变更时，理论上管理员需要对这个用户的权限进行重新分配。但是，准确识别每一个用户需要哪些权限、不需要哪些权限，是一个很有挑战的工作。如果采用了 role-BAC，那么管理员只需要简单地将用户从一个角色转移到另一个角色，就可以完成权限的变更。因此，role-BAC 更适合在管理员集中管理的时候进行使用。在这种情况下，所有的权限都由管理员进行分配和变更，所以，使用 role-BAC 可以大大降低管理员的工作难度，提高他们的工作效率。同样的原理也适用于应用，应用可以对不同的角色限定不同的操作权限，比如：运维人员给开发、产品、运维划分不同的机器操作权限。
   - rule-BAC（rule Based Access Control，基于规则的访问控制）**rule-BAC 就是制定某种规则，将主体、请求和客体的信息结合起来进行判定**。相比较来说，DAC 是所有者对客体制定的访问控制策略，role-BAC 是管理员对主体制定的访问控制策略，而 rule-BAC 可以说是针对请求本身制定的访问控制策略。在 rule-BAC 中，有一点需要我们注意。那就是，**我们需要定义是“默认通过”还是“默认拒绝”**，即当某次请求没有命中任何一条规则时，我们是应该让它“通过”还是“拒绝”呢？这需要根据安全的需求来进行综合考量。比如，某个服务只提供了 80 和 443 端口的 Web 服务，那么防火墙配置的规则是允许这两个端口的请求通过。对于其他任何请求，因为没有命中规则，所以全部拒绝。这就是“默认拒绝”的策略。很多时候，**为了保障更高的可用性，应用会采取“默认通过”的策略**。
   - MAC（Mandatory Access Control，强制访问控制）**MAC 是一种基于安全级别标签的访问控制策略**。为了保证机密性，MAC 不允许低级别的主体读取高级别的客体、不允许高级别的主体写入低级别的客体；为了保证完整性，MAC 不允许高级别的主体读取低级别的客体，不允许低级别的主体写入高级别的客体。**MAC 是安全性最高的访问控制策略。但它对实施的要求也很高，需要对系统中的所有数据都进行标记。**

5. #### 用权限三角形模型来理解并描述下 2 种威胁模型：提权、仿冒。

   - 提权：
     - 提权分为：水平特权提升、垂直特权提升。
       - 垂直提权
       如果用户可以访问他们不被允许访问的功能，那么这就是垂直权限提升。例如，如果非管理用户实际上可以访问他们可以删除用户帐户的管理页面，那么这就是垂直权限提升。
	   - 横向提权
	   当用户能够访问属于另一个用户的资源而不是他们自己的那种类型的资源时，就会出现水平权限提升。例如，如果一个员工应该只能访问自己的就业和工资记录，但实际上也可以访问其他员工的记录，那么这就是横向提权。
     - 提权是指本来没有某项权限的用户，通过一定的方法获得该权限，简而言之，用户以自己的身份获得了本不属于自己的权限，是用户→角色→权限，角色不变，而获取的权限扩大。
   - 仿冒
     - 仿冒是指用户A以用户B的身份通过了认证，之后行使了B所有的权利。仿冒是用户→角色，获取的角色改变，所以能够行使的权限也就因角色的改变而改变了

6. #### 试通过操作系统的访问控制机制来达到预防一种真实病毒的运行目的。

    病毒名称：Worm_MyInfect.af

    感染系统：Windows 9X/ Windows ME/ Windows NT/ Windows 2000/Windows XP/ Windows 2003/ Windows Vista

    病毒特性：生成病毒文件病毒运行后，复制自身到下面目录：%SysDir%\sysload3.exe

    修改注册表项HKCU\Software\Microsoft\Windows\CurrentVersion\Run"System Boot Check"="%SysDir%\sysload3.exe"

    感染系统中文件它能感染本地磁盘和网络共享目录中的可执行文件和脚本文件。

    下载指定网址文件从指定网址下载木马程序和病毒升级程序

    安全建议：

    局域网的计算机用户尽量避免创建可写的共享目录，已经创建共享目录的应立即停止共享。


7. ####  什么是 OAuth？

   OAuth是一个关于授权（authorization）的开放网络标准，在全世界得到广泛应用，目前的版本是2.0版。OAUTH是一种开放的协议，为桌面、手机或web应用提供了一种简单的，标准的方式去访问需要用户授权的API服务。 

8. #### 什么是 OpenID？

    **OpenID**是一个去中心化的网上身份认证系统。对于支持OpenID的网站，用户不需要记住像用户名和密码这样的传统验证标记。取而代之的是，他们只需要预先在一个作为OpenID身份提供者（identity provider, IdP）的网站上注册。OpenID是去中心化的，任何网站都可以使用OpenID来作为用户登录的一种方式，任何网站也都可以作为OpenID身份提供者。OpenID既解决了问题而又不需要依赖于中心性的网站来确认数字身份。

9. #### 试用本章所学理论分析 OAuth 和 OpenID 的区别与联系。

   OAuth本质是用于委托授权管理的协议，属于authorization的范畴。OAuth最新版本是2.0。 OpenID只能用于身份验证，也就是authentication。OpenID Connect 1.0是基于OAuth 2.0的。OpenID Connect对OAuth的主要扩展就是引入了ID Token。OAuth关注的是授权，即：“用户能做什么”；而OpenID关注的是证明，即：“用户是谁”。  OpenID是用来认证协议，OAuth是授权协议，二者是互补的。OAuth来自Twitter，可以让A网站的用户共享B网站上的他自己的资源，而不需泄露用户名和密码给另外一个网站。OAuth可以把提供的Token，限制在一个网站特定时间段的的特定资源。 

10. #### 如何使用 OAuth 和 OpenID 相关技术实现单点登录（Single Sign On）？

    单点登录，英文是 Single Sign On，缩写为 SSO。多个站点(192.168.1.20X)共用一台认证授权服务器(192.168.1.110，用户数据库和认证授权模块共用)。用户经由其中任何一个站点(比如 192.168.1.201)登录后，可以免登录访问其他所有站点。而且，各站点间可以通过该登录状态直接交互。 OAuth2有 授权服务器、资源服务器、客户端、用户（资源拥有者）这样几个角色，当我们用它来实现SSO的时候是不需要**资源服务器**这个角色的。授权服务器当然是用来做认证的，客户端就是各个应用系统，我们只需要登录成功后拿到用户信息以及用户所拥有的权限即可。 